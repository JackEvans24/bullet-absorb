[gd_scene load_steps=12 format=3 uid="uid://dcmefiejwfjyq"]

[ext_resource type="PackedScene" uid="uid://c3ytmjd7pe4pg" path="res://prefabs/enemies/enemy.tscn" id="1_no1yi"]
[ext_resource type="Script" path="res://scripts/mechanics/shared/movement/basic_movement.gd" id="2_1evv8"]
[ext_resource type="Script" path="res://scripts/mechanics/enemies/burster.gd" id="2_4a7pp"]
[ext_resource type="Material" uid="uid://jxq13s8vw71v" path="res://materials/enemy/enemy_body.tres" id="2_i8v7u"]
[ext_resource type="Script" path="res://scripts/mechanics/shared/variable_timer.gd" id="3_a2sv1"]
[ext_resource type="PackedScene" uid="uid://b4qc1nyol7os" path="res://prefabs/enemies/burster_half.tscn" id="4_hrwks"]
[ext_resource type="Script" path="res://scripts/mechanics/shared/variable_timer_config.gd" id="4_ijtvr"]
[ext_resource type="Script" path="res://scripts/mechanics/shared/fire_from_ring.gd" id="7_q2sbb"]
[ext_resource type="PackedScene" uid="uid://bwb55ll2hiucv" path="res://prefabs/bullets/perfect_enemy_bullet.tscn" id="8_mra72"]

[sub_resource type="SphereShape3D" id="SphereShape3D_5hfv7"]
radius = 0.75

[sub_resource type="BoxMesh" id="BoxMesh_hvq68"]
material = ExtResource("2_i8v7u")

[node name="Burster" instance=ExtResource("1_no1yi")]
script = ExtResource("2_4a7pp")

[node name="CollisionShape3D" parent="HitDetection" index="0"]
shape = SubResource("SphereShape3D_5hfv7")

[node name="Pivot" parent="." index="3"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0)

[node name="Body" parent="Pivot" index="0"]
visible = false
mesh = SubResource("BoxMesh_hvq68")

[node name="BursterBottomHalf" parent="Pivot" index="1" instance=ExtResource("4_hrwks")]
transform = Transform3D(0.75, 0, 0, 0, 0.75, 0, 0, 0, 0.75, 0, 0, 0)

[node name="BursterTopHalf" parent="Pivot" index="2" instance=ExtResource("4_hrwks")]
transform = Transform3D(0.75, 0, 0, 0, -0.75, 1.13247e-07, 0, -1.13247e-07, -0.75, 0, 0, 0)

[node name="DropPower" parent="." index="5"]
power_drop_count = 6

[node name="Movement" type="Node3D" parent="." index="6"]
script = ExtResource("2_1evv8")
drift_max = 0.0
drift_change = 0.0

[node name="WallCheck" type="RayCast3D" parent="Movement" index="0"]
target_position = Vector3(0, 0, 0)
debug_shape_custom_color = Color(1, 0, 0, 1)

[node name="Fire" type="Node" parent="." index="7"]
script = ExtResource("7_q2sbb")
pivot_ref = NodePath("../Pivot")
bullet_scene = ExtResource("8_mra72")

[node name="BehaviourTimer" type="Timer" parent="." index="8"]
script = ExtResource("3_a2sv1")

[node name="Pause" type="Node" parent="BehaviourTimer" index="0"]
script = ExtResource("4_ijtvr")
duration = 0.5

[node name="Walk" type="Node" parent="BehaviourTimer" index="1"]
script = ExtResource("4_ijtvr")
duration = 1.6

[node name="Windup" type="Node" parent="BehaviourTimer" index="2"]
script = ExtResource("4_ijtvr")
duration = 0.5
duration_randomness = 0.0

[node name="Fire" type="Node" parent="BehaviourTimer" index="3"]
script = ExtResource("4_ijtvr")
duration = 0.2
duration_randomness = 0.0
iterations = 3
