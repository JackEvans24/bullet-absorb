[gd_scene load_steps=7 format=3 uid="uid://bj8n5y46nf5wq"]

[ext_resource type="Script" path="res://scripts/turret.gd" id="1_scne1"]
[ext_resource type="PackedScene" uid="uid://dahpvdvtv4c1c" path="res://prefabs/bullet.tscn" id="2_gt5n0"]
[ext_resource type="Material" uid="uid://jxq13s8vw71v" path="res://materials/turret_body.tres" id="2_lg5m1"]
[ext_resource type="Material" uid="uid://detsid8q81d1o" path="res://materials/turret_gun.tres" id="3_72na1"]

[sub_resource type="CylinderMesh" id="CylinderMesh_wys4c"]
material = ExtResource("2_lg5m1")
top_radius = 0.4
bottom_radius = 0.6

[sub_resource type="CylinderMesh" id="CylinderMesh_3e3gi"]
material = ExtResource("3_72na1")
top_radius = 0.2
bottom_radius = 0.2
height = 0.4

[node name="Turret" type="Node3D"]
script = ExtResource("1_scne1")
bullet_scene = ExtResource("2_gt5n0")

[node name="Pivot" type="Node3D" parent="."]

[node name="Body" type="MeshInstance3D" parent="Pivot"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0)
mesh = SubResource("CylinderMesh_wys4c")
skeleton = NodePath("../..")

[node name="Gun" type="MeshInstance3D" parent="Pivot"]
transform = Transform3D(1, 0, 0, 0, -4.37114e-08, -1, 0, 1, -4.37114e-08, 0, 1.6, -0.5)
layers = 4
mesh = SubResource("CylinderMesh_3e3gi")

[node name="FirePoint" type="Node3D" parent="Pivot"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.6, -1)

[node name="FireTimer" type="Timer" parent="."]
wait_time = 0.2
autostart = true

[connection signal="timeout" from="FireTimer" to="." method="_on_fire"]
